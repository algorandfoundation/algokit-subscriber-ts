name: Publish

on:
  push:
    branches:
      - main
      - release
      - ci/automate-docs-minimal
  workflow_dispatch:

# The 'concurrency' setting is only relevant for limiting parallel runs of CI/Release jobs.
# Since we are only publishing docs, this can be commented out.
# concurrency: release

jobs:
  # The 'ci' job (Continuous Integration) is not needed for documentation publishing.
  # ci:
  #   name: Continuous Integration
  #   uses: makerxstudio/shared-config/.github/workflows/node-ci.yml@main
  #   with:
  #     node-version: 20.x
  #     run-commit-lint: true
  #     pre-test-script: |
  #       pipx install algokit
  #       algokit localnet start
  #       npx --yes wait-on tcp:4001 -t 30000
  #     audit-script: |
  #       npm run audit

  # The 'build' job is only needed to create a deployable package for release,
  # which is not required for documentation publishing alone.
  # build:
  #   name: Build
  #   uses: makerxstudio/shared-config/.github/workflows/node-build-zip.yml@main
  #   needs:
  #     - ci
  #   with:
  #     node-version: 20.x
  #     build-path: dist
  #     artifact-name: package

  # The 'release' job (Semantic Release) is dedicated to package versioning and publishing
  # to NPM/GitHub Releases. It is not needed for documentation publishing.
  # release:
  #   name: Release
  #   needs: build
  #   runs-on: ubuntu-latest
  # ... all steps commented out above ...

  generate-publish-docs:
    name: Publish docs
    # If the docs job does not depend on a successful 'release' (e.g., if docs are generated from
    # main or an artifact), you should remove this 'needs' line.
    # However, if your docs generation *requires* a preceding task like 'ci' to install dependencies,
    # you might change it to: needs: ci
    # Assuming for docs you only need to run the workflow, we can simplify this.
    # needs: release
    uses: ./.github/workflows/publish_docs.yml
    secrets:
      BOT_ID: ${{ secrets.BOT_ID }}
      BOT_SK: ${{ secrets.BOT_SK }}
